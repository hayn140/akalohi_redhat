---
# tasks file for upload_files_to_s3

- name: Starting Upload task from RHSAT02 to S3:Imports/
  ansible.builtin.debug:
    msg: "Copying up /var/tmp/{{ s3_key }} from rhsat02 to the {{ s3_bucket_name }} S3 Bucket at Imports/{{ s3_key }}"

- name: Upload VMDK file to S3 at Imports Directory
  amazon.aws.s3_object:
    bucket: "{{ s3_bucket_name }}"
    src: "/var/tmp/{{ s3_key }}"
    object: "Imports/{{ s3_key }} }}"
    mode: put
    region: "{{ aws_region }}"
    access_key: "{{ aws_access_key }}"
    secret_key: "{{ aws_secret_key }}"
    session_token: "{{ aws_session_token }}"
    validate_certs: false
  register: s3_upload_results

- name: Debug
  ansible.builtin.debug:
    var: s3_upload_results
